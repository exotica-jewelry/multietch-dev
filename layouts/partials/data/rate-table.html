{{- $pctx := .pctx }}
{{- $metal := .metal }}
{{- $data := .data }}

{{- with $data.preparing }}
  {{- $subtypeLabel := .subtype.label | title }}
  <table class="table">
    <caption class="table__caption">
      Preparing {{ $metal }} {{ .label }} using
      <span class="multietch-wordmark"
        >Multi&#8209;Etch<span class="registered">&#174;</span></span
      >
    </caption>
    <thead class="table__head">
      <tr class="table__row">
        <th class="table__cell table__cell--head" scope="col">
          {{- $subtypeLabel -}}
        </th>
        <th class="table__cell table__cell--head" scope="col">Process</th>
        <th class="table__cell table__cell--head" scope="col">Etch time</th>
        <th class="table__cell table__cell--head" scope="col">
          Surface change
        </th>
      </tr>
    </thead>
    <tbody class="table__body">
      {{- range $key, $value := .subtype }}
        {{- if ne $key "label" }}
          <tr class="table__row">
            <th
              class="table__cell table__cell--head table__cell--head3"
              data-title="{{ $subtypeLabel }}"
            >
              {{- $key -}}
            </th>
            <th class="table__cell table__cell--head table__cell--head3"></th>
            <th class="table__cell table__cell--head table__cell--head3"></th>
            <th class="table__cell table__cell--head table__cell--head3"></th>
          </tr>
          {{- range . }}
            <tr class="table__row">
              <td class="table__cell" data-title="{{ $subtypeLabel }}"></td>
              <td class="table__cell table__cell--process" data-title="Process">
                {{- index . "process" -}}
              </td>
              <td class="table__cell" data-title="Etch time">
                {{- index . "time" -}}
              </td>
              <td class="table__cell" data-title="Surface change">
                {{- index . "surface" -}}
              </td>
            </tr>
          {{- end }}
        {{- end }}
      {{- end }}
    </tbody>
  </table>
{{- end -}}

{{- with $data.removing_color }}
  {{- $subtypeLabel := .subtype.label | title }}
  <table class="table">
    <caption class="table__caption">
      Removing color from {{ $metal }} using
      <span class="multietch-wordmark"
        >Multi&#8209;Etch<span class="registered">&#174;</span></span
      >
    </caption>
    <thead class="table__head">
      {{- with .note }}
        <tr class="table__row">
          <td class="table__cell table__note" colspan="4" scope="colgroup">
            {{- . -}}
          </td>
        </tr>
      {{- end }}
      <tr class="table__row">
        <th class="table__cell table__cell--head" scope="col">
          {{- $subtypeLabel -}}
        </th>
        <th class="table__cell table__cell--head" scope="col">Process</th>
        <th class="table__cell table__cell--head" scope="col">Etch time</th>
        <th class="table__cell table__cell--head" scope="col">
          Surface change
        </th>
      </tr>
    </thead>
    <tbody class="table__body">
      {{- range $key, $value := .subtype }}
        {{- if ne $key "label" }}
          <tr class="table__row">
            <th
              class="table__cell table__cell--head table__cell--head3"
              data-title="{{ $subtypeLabel }}"
            >
              {{- $key -}}
            </th>
            <th class="table__cell table__cell--head table__cell--head3"></th>
            <th class="table__cell table__cell--head table__cell--head3"></th>
            <th class="table__cell table__cell--head table__cell--head3"></th>
          </tr>
          {{- range . }}
            <tr class="table__row">
              <td class="table__cell" data-title="{{ $subtypeLabel }}"></td>
              <td class="table__cell table__cell--process" data-title="Process">
                {{- index . "process" -}}
              </td>
              <td class="table__cell" data-title="Etch time">
                {{- index . "time" -}}
              </td>
              <td class="table__cell" data-title="Surface change">
                {{- index . "surface" -}}
              </td>
            </tr>
          {{- end }}
        {{- end }}
      {{- end }}
    </tbody>
  </table>
{{- end -}}
